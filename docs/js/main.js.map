{"version":3,"file":"main.js","sources":["js/screens/screenStart.js","js/controller.js","js/screens/screenGame.js","js/screens/screenScore.js","js/view.js","js/utils.js","js/table.js","js/figures.js","js/model.js","js/main.js"],"sourcesContent":["import {view} from '../view.js';\r\nimport {model} from '../model.js';\r\n\r\n\r\nconst template = ``;\r\n\r\n// import screensController from '../screensController.js';\r\n//\r\n// const template = `<section class=\"main main--welcome\">\r\n//    <section class=\"logo\" title=\"Угадай мелодию\"><h1>Угадай мелодию</h1></section>\r\n//    <button class=\"button_start\">Начать игру</button>\r\n//    <h2 class=\"title main-title\">Правила игры</h2>\r\n//    <p class=\"text main-text\">\r\n//      Правила просты&nbsp;— за&nbsp;2 минуты дать\r\n//      максимальное количество правильных ответов.<br>\r\n//      Удачи!\r\n//    </p>\r\n//  </section>`;\r\n//\r\n//\r\nfunction getElem() {\r\n//  let table = new Table(model.rows, model.cells);\r\n\r\n//  let tableElem = table.getElem();\r\n\r\n//  let screen = document.querySelector(`.screen`);\r\n//  screen.appendChild(tableElem);\r\n\r\n  const elem = view.getElementFromTemplate(template);\r\n  const button = elem.querySelector(`.button_start`);\r\n  button.onclick = function () {\r\n    view.renderScreen(`screenGame`);\r\n  };\r\n\r\n  return elem;\r\n}\r\n\r\nexport default {\r\n  getElem\r\n};\r\n","import {model} from './model.js';\r\n\r\nconst gameTickSpeed = 50;\r\nconst moveDelay = 200;\r\nconst rotateTick = 500;\r\nconst rotateDelay = 500;\r\n\r\nfunction decorRotate() {\r\n  if(!model.figure) return;\r\n  model.figure.rotate();\r\n}\r\n\r\nfunction decorMove(direction) {\r\n  if(!model.figure) return;\r\n  model.figure.move(direction);\r\n}\r\n\r\nconst Key = {\r\n//  _pressed: {},\r\n//  _timers: {},\r\n\r\n  LEFT: 37,\r\n  UP: 38,\r\n  RIGHT: 39,\r\n  DOWN: 40,\r\n  ESC: 27,\r\n\r\n  init() {\r\n    this._pressed = {};\r\n    this._timers = {};\r\n  },\r\n\r\n  isDown(keyCode) {\r\n    return this._pressed[keyCode];\r\n  },\r\n\r\n  onKeydown(event) {\r\n    this._pressed[event.keyCode] = true;\r\n//    this._timers[event.keyCode] = true;\r\n  },\r\n\r\n  onKeyup(event) {\r\n    delete this._pressed[event.keyCode];\r\n    clearTimeout(this._timers[event.keyCode]);\r\n    delete this._timers[event.keyCode];\r\n  }\r\n};\r\n\r\n\r\nlet debouncedRotateWithFirstDelay = throttleWithFirstDelay(decorRotate, Key.UP, rotateTick, rotateDelay);\r\nlet debouncedMoveLeft = throttleWithFirstDelay(decorMove, Key.LEFT, gameTickSpeed, moveDelay);\r\nlet debouncedMoveRight = throttleWithFirstDelay(decorMove, Key.RIGHT, gameTickSpeed, moveDelay);\r\n\r\n// переместить ее в controller, чтобы self = controller\r\nfunction throttleWithFirstDelay(f, key, ms, firstDelay) {\r\n//  let timer;\r\n//  Key._timers[event.keyCode] = true;\r\n  let args;\r\n  let called = false;\r\n\r\n  return function () {\r\n//\t\t\t\tdebugger;\r\n    let self = this;\r\n    args = [].slice.call(arguments);\r\n\r\n    if (Key._timers[key]) {\r\n      called = true;\r\n      return;\r\n    }\r\n\r\n    f.apply(self, args);\r\n\r\n\t\t// рекурсивный вызов timeout вместо interval\r\n    Key._timers[key] = setTimeout(function runTimer() {\r\n//\t\t\t\t\tdebugger;\r\n      if (!called) {\r\n        Key._timers[key] = null;\r\n      }\r\n\r\n      if (Key._timers[key] && called) {\r\n        if (Key.isDown(key)) {\r\n          f.apply(self, args);\r\n        }\r\n        Key._timers[key] = setTimeout(runTimer, ms, args);\r\n      }\r\n\r\n      called = false;\r\n    }, firstDelay, args);\r\n  };\r\n}\r\n\r\nlet controller = {\r\n  init() {\r\n    let startButton = document.querySelector(`.button_start`);\r\n    let pauseButton = document.querySelector(`.button_pause`);\r\n\r\n    startButton.onclick = function () {\r\n      model.init();\r\n      model.startGame();\r\n    };\r\n\r\n    pauseButton.onclick = function () {\r\n      model.figure.pause();\r\n    };\r\n  },\r\n\r\n  activate() {\r\n//    window.addEventListener(`keydown`, this.keyHandle);\r\n\r\n    window.addEventListener(`keyup`, this.keyUpHandle, false);\r\n    window.addEventListener(`keydown`, this.keyDownHandle, false);\r\n    this.activateKeyRefresher();\r\n    Key.init();\r\n  },\r\n\r\n  deactivate() {\r\n//    window.removeEventListener(`keydown`, this.keyHandle);\r\n\r\n    window.removeEventListener(`keyup`, this.keyUpHandle);\r\n    window.removeEventListener(`keydown`, this.keyDownHandle);\r\n    this.deactivateKeyRefresher();\r\n  },\r\n\r\n  keyDownHandle(e) {\r\n    Key.onKeydown(e);\r\n\r\n    // отменяем событие\r\n    let keycode = e.keyCode;\r\n\r\n    switch (keycode) {\r\n      case Key.LEFT:\r\n      case Key.UP:\r\n      case Key.RIGHT:\r\n      case Key.DOWN:\r\n        e.preventDefault();\r\n        break;\r\n      case Key.ESC:\r\n        e.preventDefault();\r\n        model.figure.pause();\r\n        break;\r\n    }\r\n  },\r\n\r\n  keyUpHandle(e) {\r\n    Key.onKeyup(e);\r\n  },\r\n\r\n  activateKeyRefresher() {\r\n    this.keyTimer = setInterval(this.keyUpdate, gameTickSpeed);\r\n  },\r\n\r\n  deactivateKeyRefresher() {\r\n    clearInterval(this.keyTimer);\r\n  },\r\n\r\n  keyUpdate() {\r\n    if (!model.figure) {\r\n      return;\r\n    }\r\n\r\n    if (Key.isDown(Key.UP)) {\r\n      debouncedRotateWithFirstDelay();\r\n    }\r\n\r\n    if (Key.isDown(Key.LEFT)) {\r\n      debouncedMoveLeft(`left`);\r\n    }\r\n    if (Key.isDown(Key.DOWN)) {\r\n      model.figure.move(`down`);\r\n    }\r\n    if (Key.isDown(Key.RIGHT)) {\r\n      debouncedMoveRight(`right`);\r\n    }\r\n    if (Key.isDown(Key.ESC)) {\r\n//      model.figure.pause();\r\n    }\r\n  },\r\n\r\n  // тут нужно тестировать на выход за пределы поля и пересечение с \"кучей\"\r\n  testCoords(coords) {\r\n//    console.log(coords);\r\n    // каждый пиксель фигуры нужно протестировать\r\n    return coords.every((item) => {\r\n      return this.testPixel(item);\r\n    });\r\n  },\r\n\r\n  testPixel(coords) {\r\n//    console.log(coords);\r\n    // проверка на выход за пределы поля\r\n    let pixelCoords = model.splitCoords(coords);\r\n//    console.log(pixelCoords);\r\n\r\n    // убрать pixelCoords.row < 0 чтобы можно было располагать фигуры сверху за экраном\r\n    if (pixelCoords.row >= model.rows || pixelCoords.cell < 0 || pixelCoords.cell >= model.cells) {\r\n//      console.log(pixelCoords);\r\n//      console.log(`пиксель пытается попасть за пределы экрана`);\r\n      return false;\r\n    }\r\n\r\n\r\n    // проверка на пересечение с кучей\r\n    // model.lines[row][column]\r\n    if (pixelCoords.row >= 0 && model.lines[pixelCoords.row][pixelCoords.cell]) {\r\n//      console.log(pixelCoords);\r\n//      console.log(`пересечение с кучей`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  isHit(location) {\r\n    let row = +location.charAt(0);\r\n    let column = +location.charAt(1);\r\n\r\n    return (model.lines[row][column]);\r\n  }\r\n};\r\n\r\nexport {controller};\r\n","import {view} from '../view.js';\r\nimport {model} from '../model.js';\r\nimport {controller} from '../controller.js';\r\n\r\n\r\nlet _screenTable;\r\nlet _nextFigureScreen;\r\nlet _linesSpan;\r\nlet _speedSpan;\r\n\r\n\r\nfunction getElem() {\r\n//  const elem = view.getElementFromTemplate(template);\r\n//  const button = elem.querySelector(`.button_start`);\r\n//  button.onclick = function () {\r\n//    view.renderScreen(`screenArtist`);\r\n//  };\r\n\r\n  setTimeout(init, 0);\r\n\r\n  return elem;\r\n}\r\n\r\nfunction init() {\r\n//  _screenTable = document.querySelector(`.screen`);\r\n//  _nextFigureScreen = document.querySelector(`.nextFigure__table`);\r\n//  _linesSpan = document.querySelector(`.info__score`);\r\n//  _speedSpan = document.querySelector(`.info__speed`);\r\n  model.generateFigure();\r\n//  controller.init();\r\n}\r\n\r\n// let screenTable = document.querySelector(`.screen`);\r\n// let nextFigureScreen = document.querySelector(`.nextFigure__table`);\r\n// let linesSpan = document.querySelector(`.info__score`);\r\n// let speedSpan = document.querySelector(`.info__speed`);\r\n\r\nexport default {\r\n  getElem,\r\n  get screenTable() {\r\n    return _screenTable;\r\n  },\r\n  get nextFigureScreen() {\r\n    return _nextFigureScreen;\r\n  },\r\n  get linesSpan() {\r\n    return _linesSpan;\r\n  },\r\n  get speedSpan() {\r\n    return _speedSpan;\r\n  }\r\n};\r\n","import {model} from '../model.js';\r\nimport {view} from '../view.js';\r\n\r\nconst template = (highScore) => `<div class=\"score\">\r\n<h1 class=\"score__title\">High Scores</h1>\\\r\n<p>Вы набрали: <span class=\"score__currentRecord\">${highScore.score}</span></p>\r\n<table class=\"score__table\">\r\n<tr><th>Игрок</th><th>Линии</th></tr>\r\n${highScore.record.map((item) => {\r\n  return `<tr  class=\"score__row\">\r\n          <td  class=\"score__cell score__cell_name\">${item.name}</td>\r\n          <td  class=\"score__cell score__cell_score\">${item.score}</td>\r\n        </tr>`;\r\n}).join(``)}\r\n</table>\r\n\r\n\r\n<button type=\"button\" class=\"score__button\">Удалить рекорды?</button>\r\n</div>`;\r\n\r\nfunction getElem() {\r\n  let record = model.record;\r\n  let score = model.score;\r\n\r\n  const elem = view.getElementFromTemplate(template({record, score}));\r\n  const button = elem.querySelector(`.score__button`);\r\n  button.onclick = function () {\r\n//    model.init();\r\n//    view.renderScreen(`screenGame`);\r\n\r\n    //кнопка должна удалять рекорды\r\n    model.deleteHighScore();\r\n\r\n    //и обновлять таблицу\r\n    let scoreElem = document.querySelector(`.score`);\r\n    scoreElem.innerHTML = `<h1 class=\"score__title score__title_center\">Рекорды сброшены</h1>`;\r\n//    model.gameOver();\r\n  };\r\n\r\n//  setTimeout(init, 0);\r\n\r\n  return elem;\r\n}\r\n\r\nfunction init() {\r\n//  showHighScores();\r\n}\r\n\r\n//function showHighScores() {\r\n//  let record = model.record;\r\n//  console.log(`Game over!\r\n//Вы набрали: ${model.score} очков.\r\n//Рекорд: ${model.record[0].name} - ${model.record[0].score}`);\r\n//  debugger;\r\n//}\r\n\r\nexport default {\r\n  getElem\r\n};\r\n","import {model} from './model.js';\r\n// import {controller} from './controller.js';\r\n\r\nimport screenStart from './screens/screenStart.js';\r\nimport screenGame from './screens/screenGame.js';\r\nimport screenScore from './screens/screenScore.js';\r\n\r\nconst screens = {\r\n  screenStart,\r\n  screenGame,\r\n  screenScore\r\n};\r\n\r\nlet board = document.querySelector(`#board`);\r\nlet screenTable = document.querySelector(`.screen`);\r\nlet nextFigureScreen = document.querySelector(`.nextFigure__table`);\r\nlet linesSpan = document.querySelector(`.info__score`);\r\nlet speedSpan = document.querySelector(`.info__speed`);\r\n\r\n\r\nlet view = {\r\n  nextFigureScreen,\r\n\r\n  init() {\r\n//    this.renderScreen(`screenStart`);\r\n//    this.showOverlay(`start`);\r\n    this.overlay = document.querySelector(`.overlay__start`);\r\n  },\r\n\r\n  displayMessage(msg) {\r\n    let area = document.getElementById(`messageArea`);\r\n    area.innerHTML = msg;\r\n  },\r\n\r\n\t// location нужно передавать как строку (\"01\"), иначе JS будет считать это 8-ричным числом\r\n  displayHit(location, area) {\r\n    if (location[0] === `-`) {\r\n      return;\r\n    }\r\n//    console.log(location);\r\n    // берем либо экран игры либо экран следующей фигуры\r\n    if (!area) {\r\n//      area = screenGame.screenTable;\r\n      area = screenTable;\r\n    } else {\r\n//      area = screenGame.nextFigureScreen;\r\n      area = nextFigureScreen;\r\n    }\r\n\r\n    location = location + ``;\r\n//    let cell = area.getElementById(location);\r\n    // экранируем первый символ, т.к. имена классов - цифры\r\n    let firstLocationNum = `\\\\3` + location[0] + ` `;\r\n    let restLocation = location.slice(1);\r\n    restLocation = restLocation.replace(`.`, `\\\\.`);\r\n\r\n    // ищём ячейку\r\n    let cell = area.querySelector(`.` + firstLocationNum + restLocation);\r\n\r\n    // экранировать первую цифру и точку\r\n\r\n//    debugger;\r\n//    let unicodeNum = location.charCodeAt(0);\r\n//    let unicodeNum2 = location.charCodeAt(1);\r\n//    let unicodeNum3 = location.charCodeAt(2);\r\n//    console.log(String.fromCharCode(unicodeNum,unicodeNum2,unicodeNum3));\r\n//    let cell = area.getElementsByClassName(`.` + location)[0];\r\n//\t\tcell.setAttribute(\"class\", \"hit\");\r\n    if (!cell) {\r\n      return;\r\n    }\r\n    cell.classList.add(`hit`);\r\n  },\r\n\r\n  clearCell(location) {\r\n    location = location + ``;\r\n    let cell = document.getElementById(location);\r\n//\t\tcell.setAttribute(\"class\", \"\");\r\n    if (!cell) {\r\n      return;\r\n    }\r\n    cell.classList.remove(`hit`);\r\n  },\r\n\r\n  refresh() {\r\n//    console.log(`view.refresh`);\r\n    for (let i = 0; i < model.currentState.lines.length; i++) {\r\n      for (let j = 0; j < model.currentState.lines[i].length; j++) {\r\n        if (model.currentState.lines[i][j]) {\r\n          this.displayHit(i + `.` + j);\r\n        } else {\r\n          this.clearCell(i + `.` + j);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  },\r\n\r\n  refreshNextFigure() {\r\n    nextFigureScreen.querySelectorAll(`td`).forEach((cell) => cell.classList.remove(`hit`));\r\n  },\r\n\r\n  displayNextFigure(coords) {\r\n\r\n\r\n    // отрисовать поле нужного размера\r\n\r\n    // отрисовать на нём фигуру\r\n\r\n\r\n//     и отрисовать след фигуру в окошке, передав параметр - элемент куда отрисовать\r\n    coords.forEach((item) => {\r\n      this.displayHit(item, `draw nextFigure`);\r\n    });\r\n  },\r\n\r\n  refreshInfo() {\r\n  // пишем сколько линий стерто\r\n    linesSpan.innerHTML = model.score;\r\n    speedSpan.innerHTML = model.speed;\r\n//    nextFigureBlock.innerHTML = model.nextFigure;\r\n  },\r\n\r\n  getElementFromTemplate(template) {\r\n    let container = document.createElement(`template`);\r\n    container.innerHTML = template;\r\n    return container.content;\r\n  },\r\n\r\n  renderScreen(name, parent) {\r\n    let elem = screens[name].getElem();\r\n    parent.innerHTML = ``;\r\n    parent.appendChild(elem);\r\n  },\r\n\r\n  // принимаем имя оверлея на вход и ищём его по классу\r\n  // name => querySelector(`.overlay++` + name);\r\n  showOverlay(name) {\r\n\r\n    // меняем классы у существуюущих в разметке элементов с классом .overlay\r\n    // например - .overlay .overlay__start .hidden\r\n    // удаляем .hidden - этот экран становится виден\r\n    if (this.overlay) {\r\n      this.hideOverlay();\r\n    }\r\n\r\n    this.overlay = document.querySelector(`.overlay__` + name);\r\n    this.overlay.classList.remove(`hidden`);\r\n\r\n//    board.innerHTML = ``;\r\n//    board.appendChild(elem);\r\n//    console.log(screens);\r\n  },\r\n\r\n  hideOverlay() {\r\n    this.overlay.classList.add(`hidden`);\r\n  }\r\n};\r\n\r\nexport {view};\r\n","function randomInteger(min, max) {\r\n  let rand = min + Math.random() * (max + 1 - min);\r\n  rand = Math.floor(rand);\r\n  return rand;\r\n}\r\n\r\nfunction nextIndexInArray(index, arr) {\r\n  if (index < arr.length - 1) {\r\n    return ++index;\r\n  } else if (index === arr.length - 1) {\r\n    return 0;\r\n  }\r\n}\r\n\r\nfunction debounce (f, ms) {\r\n  var timer;\r\n\r\n  return function() {\r\n    if(timer) clearTimeout(timer);\r\n\r\n    var self = this;\r\n    var args = [].slice.call(arguments);\r\n\r\n    timer = setTimeout(function() {\r\n      f.apply(self, args);\r\n    }, ms, args);\r\n  };\r\n};\r\n\r\nfunction throttle (f, ms) {\r\n\tvar timer;\r\n\tvar args;\r\n\tvar called = false;\r\n\r\n\treturn function() {\t\r\n//\t\t\t\tdebugger;\r\n\t\tvar self = this;\r\n\t\targs = [].slice.call(arguments);\r\n\r\n\t\tif(timer) {\r\n\t\t\tcalled = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tf.apply(self, args);\r\n\r\n\t\t//рекурсивный вызов timeout вместо interval\r\n\t\ttimer = setTimeout(function runTimer() {\r\n//\t\t\t\t\tdebugger;\r\n\t\t\tif(!called) {\r\n\t\t\t\ttimer = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (timer && called) {\r\n\t\t\t\tf.apply(self, args);\r\n\t\t\t\ttimer = setTimeout(runTimer, ms, args);\r\n\t\t\t}\r\n\r\n\t\t\tcalled = false;\r\n\t\t}, ms, args);\r\n\t};\r\n}\r\n\r\n\r\n    // возвращает cookie с именем name, если есть, если нет, то undefined\r\nfunction getCookie(name) {\r\n  let matches = document.cookie.match(new RegExp(\r\n        `(?:^|; )` + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, `\\\\$1`) + `=([^;]*)`\r\n      ));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\n\r\n// Аргументы:\r\n// name  название cookie\r\n//\r\n// value значение cookie (строка)\r\n//\r\n// options Объект с дополнительными свойствами для установки cookie:\r\n//\r\n// expires Время истечения cookie. Интерпретируется по-разному, в зависимости от типа:\r\n//\r\n//        Число – количество секунд до истечения. Например, expires: 3600 – кука на час.\r\n//        Объект типа Date – дата истечения.\r\n//        Если expires в прошлом, то cookie будет удалено.\r\n//        Если expires отсутствует или 0, то cookie будет установлено как сессионное и исчезнет при закрытии браузера.\r\n//\r\n// path Путь для cookie.\r\n//\r\n// domain Домен для cookie.\r\n//\r\n// secure Если true, то пересылать cookie только по защищенному соединению.\r\n//\r\n//    setCookie('test', '123', {expires: 0});\r\n//    setCookie('key2', \"\", {expires: 1 * 365 * 24 * 60 * 60}); кука на год\r\n\r\nfunction setCookie(name, value, options) {\r\n  options = options || {};\r\n\r\n  let expires = options.expires;\r\n\r\n  if (typeof expires === `number` && expires) {\r\n    let d = new Date();\r\n    d.setTime(d.getTime() + expires * 1000);\r\n    expires = options.expires = d;\r\n  }\r\n  if (expires && expires.toUTCString) {\r\n    options.expires = expires.toUTCString();\r\n  }\r\n\r\n  value = encodeURIComponent(value);\r\n\r\n  let updatedCookie = name + `=` + value;\r\n\r\n  for (let propName in options) {\r\n    updatedCookie += `; ` + propName;\r\n    let propValue = options[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += `=` + propValue;\r\n    }\r\n  }\r\n\r\n  console.log(updatedCookie);\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nfunction deleteCookie(name) {\r\n  setCookie(name, ``, {\r\n    expires: -1\r\n  });\r\n}\r\n\r\n\r\nexport default {\r\n  randomInteger,\r\n  nextIndexInArray,\r\n  getCookie,\r\n  setCookie,\r\n  deleteCookie,\r\n\tdebounce,\r\n\tthrottle\r\n};\r\n","class Table {\r\n  constructor(rows, cells) {\r\n    this.rows = rows;\r\n    this.cells = cells;\r\n    // конструктор должен получать размер таблицы\r\n  }\r\n\r\n  getElem() {\r\n    if (!this.elem) {\r\n      this.render();\r\n    }\r\n    return this.elem;\r\n  }\r\n\r\n  render() {\r\n//    this.elem = createElementFromHtml(html);\r\n//\r\n//    this.elem.addEventListener('click', this);\r\n\r\n    // тут должен создаваться новый элемент через createElement, а не искаться в документе\r\n    // либо искаться по селектору, который передан в конструкторе\r\n//    this.elem = document.querySelector(`#table`);\r\n    this.elem = document.createDocumentFragment();\r\n\r\n    this.template = this.getTemplate();\r\n\r\n    // это нужно переписать - оно должно получать размер из конструктора, а не брать из модели\r\n    this.drawTable();\r\n  }\r\n\r\n  getTemplate() {\r\n    if (this.template) {\r\n      return this.template;\r\n    }\r\n\r\n    let template = document.querySelector(`template`);\r\n\r\n    let trTemplate;\r\n    let tdTemplate;\r\n\r\n\r\n    if (`content` in template) { // полифилл под IE11\r\n      trTemplate = template.content.querySelector(`.screen__row`);\r\n      tdTemplate = template.content.querySelector(`.screen__cell`);\r\n    } else {\r\n      trTemplate = template.children[0];\r\n      tdTemplate = template.children[1];\r\n    }\r\n\r\n    return {\r\n      trTemplate,\r\n      tdTemplate\r\n    };\r\n  }\r\n\r\n  // вместо state.rows нужно передавать объект size.rows/size.cells\r\n  drawTable() {\r\n//    console.log(state);\r\n\r\n    let fragment = document.createDocumentFragment();\r\n\r\n    for (let i = 0; i < this.rows; i++) {\r\n      let tr = this.template.trTemplate.cloneNode(true);\r\n      fragment.appendChild(tr);\r\n\r\n      for (let j = 0; j < this.cells; j++) {\r\n        let td = this.template.tdTemplate.cloneNode(true);\r\n        td.classList.add(`${i + `.` + j}`);\r\n        td.id = i + `.` + j;\r\n        tr.appendChild(td);\r\n      }\r\n    }\r\n\r\n    this.elem.appendChild(fragment);\r\n  }\r\n}\r\n\r\nexport {Table};\r\n","import {model} from './model.js';\r\nimport {view} from './view.js';\r\nimport {controller} from './controller.js';\r\nimport utils from './utils';\r\nimport {Table} from './table.js';\r\n\r\nconst delayBetweenFigures = 300;\r\n\r\n\r\n// Прототип с методами\r\nclass Figure {\r\n\r\n  get currentCoords() {\r\n    return this._currentCoords;\r\n  }\r\n  set currentCoords(coords) {\r\n    this._currentCoords = coords;\r\n  }\r\n\r\n  drawFigure() {\r\n    // протестировать координаты перед отрисовкой, если заняты - конец игры\r\n    let canMove = controller.testCoords(this.currentCoords);\r\n\r\n    if (!canMove) {\r\n      model.gameOver();\r\n    }\r\n\r\n    view.refresh();\r\n\r\n    this.currentCoords.forEach((item) => {\r\n      view.displayHit(item);\r\n    });\r\n  }\r\n\r\n  drawNextFigure() {\r\n    console.log(`drawNextFigure()`);\r\n    // нужно рефрешить оконо след фигуры\r\n    view.refreshNextFigure();\r\n\r\n    // вызвать calculateFigureSize и получить размер фигуры\r\n    this.calculateFigureSize();\r\n\r\n    // генерируем мини-таблицу для следующей фигуры\r\n    // вызвать функцию генерации таблицы (поля) с указанным размером\r\n    // она должна получить размер и вернуть элемент\r\n    this.table = new Table(this.rows, this.cells);\r\n\r\n    let table = this.table.getElem();\r\n//    let nextFigureScreen = document.querySelector(`.nextFigure__table`);\r\n//    debugger;\r\n    if (!view.nextFigureScreen) {\r\n      return;\r\n    }\r\n\r\n    view.nextFigureScreen.innerHTML = ``;\r\n    view.nextFigureScreen.appendChild(table);\r\n\r\n    let coords = this.previewCoords || this.coords;\r\n\r\n    view.displayNextFigure(coords);\r\n//\r\n  }\r\n\r\n  calculateFigureSize() {\r\n//    console.log(`displayNextFigure`, this.coords);\r\n    // вычислить ширину и высоту фигуры\r\n    let minCell = 0;\r\n    let maxCell = 0;\r\n    let minRow = 0;\r\n    let maxRow = 0;\r\n\r\n    this.coords.forEach((item) => {\r\n      let coords = model.splitCoords(item);\r\n//      row: itemRow, cell: itemCell\r\n      if (coords.cell < minCell) {\r\n        minCell = coords.cell;\r\n      }\r\n      if (coords.cell > maxCell) {\r\n        maxCell = coords.cell;\r\n      }\r\n      if (coords.row < minRow) {\r\n        minRow = coords.row;\r\n      }\r\n      if (coords.row > maxRow) {\r\n        maxRow = coords.row;\r\n      }\r\n    });\r\n\r\n    let width = (maxCell - minCell) + 1;\r\n    let height = (maxRow - minRow) + 1;\r\n\r\n//    console.log(`Width: ` + width, `Height: ` + height);\r\n    this.cells = width;\r\n    this.rows = height;\r\n  }\r\n\r\n  eraseFigure() {\r\n    this.currentCoords.forEach((item) => view.clearCell(item));\r\n  }\r\n\r\n  startMoving() {\r\n\r\n    // запуск функции вычисления тика\r\n    this.tick = this.calculateTickSpeed();\r\n    view.refreshInfo();\r\n\r\n    this.startTimer();\r\n\r\n\r\n//    this.timer = setTimeout(function timerok() {\r\n//      console.log(this);\r\n//      console.log(model);\r\n//      console.log(`Сработал таймер ` + this.timer);\r\n//      //двигаем фигуру вниз\r\n//      this.move(`down`);\r\n//\r\n//      this.tick = 1000 -  model.speed*100;\r\n//      this.timer = setTimeout(timerok.bind(this), this.tick);\r\n//    }.bind(this), model.figure.tick);\r\n  }\r\n\r\n  startTimer() {\r\n    this.timer = setInterval(function () {\r\n      this.move(`down`);\r\n    }.bind(this), this.tick);\r\n  }\r\n\r\n  pause() {\r\n    model.paused = !model.paused;\r\n\r\n    if (model.paused) {\r\n      clearInterval(this.timer);\r\n      // Добавить надпись ПАУЗА\r\n      console.log(`Пауза`);\r\n    } else {\r\n      this.startTimer();\r\n    }\r\n  }\r\n\r\n  calculateTickSpeed() {\r\n    model.speed = Math.floor(model.score / 10);\r\n    if (model.speed > 9) {\r\n      model.speed = 9;\r\n    }\r\n    // 1000 магическое число - 1секунда. Стандартный таймер\r\n    // 100 магическое число - шаг ускорения таймера, при повышении уровня скорости\r\n    // каждые 10 линий фигура ускоряется на 100мс\r\n    let timerTick = 1000 - model.speed * 100;\r\n//    console.log(timerTick);\r\n    return timerTick;\r\n  }\r\n\r\n  move(direction) {\r\n\r\n    if (model.figure != this) {\r\n      debugger;\r\n      console.log(`return!`);\r\n      return;\r\n    }\r\n//    console.log(direction);\r\n    let coords = this.currentCoords;\r\n//    console.log(coords);\r\n    let newCoords = this.calculateCoordsAfterMove(coords, direction);\r\n    // тестируем новые координаты на пересечение и границу экрана\r\n    let canMove = controller.testCoords(newCoords);\r\n//    console.log(canMove);\r\n    // если есть препятствие и движение влево-вправо - не двигаем\r\n\r\n\r\n    // если нет препятствия - отрисовываем фигуру на новом месте\r\n    if (canMove) {\r\n      this.redrawFigure(newCoords);\r\n\r\n    // если есть препятствие и движение вниз - запускаем слияние с кучей\r\n    } else if (!canMove && direction === `down`) {\r\n      // записываем координаты фигуры в кучу\r\n      this.fusionWithMasonry(coords);\r\n\r\n      // создаём новую фигуру?\r\n//      метод model должен удалить фигуру и создать новую\r\n\r\n      // задержка при генерации новой фигуры\r\n//      debugger;\r\n      // удаляем текущую фигуру, чтобы остановить таймер движения фигуры и создаём новую фигуру с задержкой\r\n      this.destroy();\r\n\r\n      setTimeout(function () {\r\n        model.generateFigure();\r\n      }, delayBetweenFigures);\r\n\r\n//      model.generateFigure();\r\n    }\r\n\r\n  }\r\n\r\n  redrawFigure(coords) {\r\n    // удаляем текущие пиксели с поля (clearCell())\r\n    this.eraseFigure();\r\n      // записываем новые пиксели в фигуру\r\n    this.currentCoords = coords;\r\n      // отрисовываем новые пиксели\r\n    this.drawFigure();\r\n  }\r\n\r\n  fusionWithMasonry(coords) {\r\n//    console.log(`Слияние с кучей`);\r\n//    console.log(model.lines);\r\n\r\n    model.linesToDelete = [];\r\n    // выполнить слияние с кучей\r\n    // для каждого пикселя вызвать запись в кучу\r\n    coords.forEach((item) => model.fire(item));\r\n\r\n    // выполнить проверку на полную линию (уже выполняется в методе model.fire)\r\n    // вызываем перерисовку всего поля (уже выполняется в методе model.fire)\r\n\r\n    // удаляем фигуру\r\n//    сортируем, чтобы удалять начиная с верхней линии\r\n    model.linesToDelete.sort((a, b) => a - b);\r\n    model.linesToDelete.forEach((row) => model.deleteLine(row));\r\n//    view.refresh();\r\n  }\r\n\r\n  calculateCoordsAfterMove(coords, direction) {\r\n    let newCoords;\r\n    let rowVector = 0;\r\n    let cellVector = 0;\r\n\r\n    switch (direction) {\r\n      case `left`:\r\n        cellVector = -1;\r\n        break;\r\n      case `up`:\r\n        rowVector = -1;\r\n        break;\r\n      case `right`:\r\n        cellVector = 1;\r\n        break;\r\n      case `down`:\r\n        rowVector = 1;\r\n        break;\r\n    }\r\n\r\n    newCoords = coords.map((item) => {\r\n      let itemCoords = model.splitCoords(item);\r\n      let itemNewPos = (itemCoords.row + rowVector) + `.` + (itemCoords.cell + cellVector);\r\n      return itemNewPos;\r\n    });\r\n\r\n//    console.log(newCoords);\r\n    return newCoords;\r\n  }\r\n\r\n\r\n  calculateRealCoords(startPos) {\r\n    let startCoords = model.splitCoords(startPos);\r\n\r\n//    console.log(startCoords);\r\n\r\n    let absoluteCoords = [];\r\n    this.coords.forEach((item) => {\r\n      let itemCoords = model.splitCoords(item);\r\n      let itemAbsolutePos = (itemCoords.row + startCoords.row) + `.` + (itemCoords.cell + startCoords.cell);\r\n      absoluteCoords.push(itemAbsolutePos);\r\n    });\r\n\r\n//    console.log(absoluteCoords);\r\n    return absoluteCoords;\r\n  }\r\n\r\n  rotate() {\r\n    if (this.rotateCoords.length === 0) {\r\n      return;\r\n    }\r\n\t\t// взять текущее положение фигуры и переключиться на следующее\r\n    let coords = this.currentCoords;\r\n\r\n    let nextRotateIndex = utils.nextIndexInArray(this.rotatePosition, this.rotateCoords);\r\n\r\n\t\t// взять вектор следующего положения фигуры\r\n    let nextRotateVector = this.rotateCoords[nextRotateIndex];\r\n\r\n\t\t// сложить текущие координаты с вектором\r\n//    console.log(coords, nextRotateVector);\r\n    let coordsAfterRotate = this.sumTwoVectors(coords, nextRotateVector);\r\n\r\n\t\t// проверить координаты - можно ли повернуть\r\n    let canMove = controller.testCoords(coordsAfterRotate);\r\n    if (!canMove) {\r\n      return;\r\n    }\r\n\r\n\t\t// если проверка прошла - записать в this.rotatePosition\r\n    this.rotatePosition = nextRotateIndex;\r\n\r\n    // перерисовать фигуру\r\n    this.redrawFigure(coordsAfterRotate);\r\n\r\n  }\r\n\r\n  sumTwoVectors(coords1, coords2) {\r\n//    console.log(coords1, coords2);\r\n    let newCoords = coords1.map((item, i) => {\r\n      let splitted1 = model.splitCoords(coords1[i]);\r\n      let splitted2 = model.splitCoords(coords2[i]);\r\n//      console.log(splitted1, splitted2);\r\n\r\n      let newCoord = (splitted1.row + splitted2.row) + `.` + (splitted1.cell + splitted2.cell);\r\n//      console.log(newCoord);\r\n      return newCoord;\r\n    });\r\n\r\n//    console.log(newCoords);\r\n    return newCoords;\r\n  }\r\n\r\n  destroy() {\r\n    // убирает таймер и удаляет фигуру\\\r\n//    console.log(`удаляем фигуру`, this);\r\n    model.figure = null;\r\n    clearInterval(this.timer);\r\n  }\r\n}\r\n\r\n\r\n// Фигуры\r\n\r\nclass Square extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`0.0`, `0.1`, `1.0`, `1.1`];\r\n    this.rotatePosition = 0;\r\n    this.rotateCoords = [];\r\n  }\r\n}\r\n\r\n\r\nclass Line extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`0.-1`, `0.0`, `0.1`, `0.2`];\r\n    this.previewCoords = [`0.0`, `0.1`, `0.2`, `0.3`];\r\n    this.rotatePosition = 0;\r\n    this.rotateCoords = [\r\n\t\t\t[`3.-1`, `2.0`, `1.1`, `0.2`],\r\n\t\t\t[`-3.1`, `-2.0`, `-1.-1`, `0.-2`]\r\n    ];\r\n  }\r\n}\r\n\r\nclass Zeka extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`1.0`, `1.1`, `0.1`, `0.2`];\r\n    this.rotatePosition = 0;\r\n    this.rotateCoords = [\r\n\t\t\t[`+2.0`, `+1.+1`, `0.0`, `-1.+1`],\r\n\t\t\t[`-2.0`, `-1.-1`, `0.0`, `+1.-1`]\r\n    ];\r\n  }\r\n}\r\n\r\nclass ZekaReverse extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`0.0`, `0.1`, `1.1`, `1.2`];\r\n    this.rotatePosition = 0;\r\n    this.rotateCoords = [\r\n\t\t\t[`-1.-1`, `0.0`, `+1.-1`, `+2.0`],\r\n\t\t\t[`+1.+1`, `0.0`, `-1.+1`, `-2.0`]\r\n    ];\r\n  }\r\n}\r\n\r\nclass Leka extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`1.0`, `1.1`, `1.2`, `0.2`];\r\n    this.rotatePosition = 3;\r\n    this.rotateCoords = [\r\n\t\t\t[`-2.+0`, `-1.-1`, `+0.-2`, `+1.-1`],\r\n\t\t\t[`+1.+2`, `-0.+1`, `-1.+0`, `-0.-1`],\r\n\t\t\t[`+1.+0`, `-0.+1`, `-1.+2`, `-2.+1`],\r\n\t\t\t[`+0.-2`, `+1.-1`, `+2.0`, `+1.+1`]\r\n    ];\r\n  }\r\n}\r\n\r\nclass LekaReverse extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n//    this.coords = [`0.1`, `1.1`, `2.1`, `2.0`];\r\n    this.coords = [`1.2`, `1.1`, `1.0`, `0.0`];\r\n    this.rotatePosition = 1;\r\n    this.rotateCoords = [\r\n\t\t\t[`-1.+1`, `+0.-0`, `+1.-1`, `-0.-2`],\r\n\t\t\t[`+2.+1`, `+1.+0`, `-0.-1`, `-1.+0`],\r\n\t\t\t[`+0.-2`, `-1.-1`, `-2.+0`, `-1.+1`],\r\n\t\t\t[`-1.-0`, `+0.+1`, `+1.+2`, `+2.+1`]\r\n    ];\r\n  }\r\n}\r\n\r\nclass Troyka extends Figure {\r\n  constructor() {\r\n    super();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.coords = [`1.0`, `1.1`, `1.2`, `0.1`];\r\n    this.rotatePosition = 0;\r\n    this.rotateCoords = [\r\n\t\t\t[`-0.-1`, `+1.-0`, `+2.+1`, `-0.+1`],\r\n\t\t\t[`-2.+1`, `-1.+0`, `-0.-1`, `-0.+1`],\r\n\t\t\t[`+1.+1`, `-0.-0`, `-1.-1`, `+1.-1`],\r\n\t\t\t[`+1.-1`, `+0.+0`, `-1.+1`, `-1.-1`]\r\n    ];\r\n  }\r\n}\r\n\r\nconst figures = [\r\n  Square,\r\n  Line,\r\n  Zeka,\r\n  ZekaReverse,\r\n  Leka,\r\n  LekaReverse,\r\n  Troyka\r\n];\r\n\r\nexport {figures};\r\n","import {view} from './view.js';\r\nimport {controller} from './controller.js';\r\nimport {figures} from './figures.js';\r\nimport utils from './utils';\r\n\r\nconst initState = Object.freeze({\r\n  rows: 20,\r\n  cells: 10,\r\n  speed: 0,\r\n  score: 0\r\n});\r\n\r\nlet currentState = null;\r\n\r\nlet model = {\r\n  figures,\r\n  initState,\r\n  currentState,\r\n  paused: false,\r\n  HIGH_SCORES_LENGTH: 10,\r\n  HIGH_SCORES_NAME: `HighScores`,\r\n  get rows() {\r\n    return this.currentState.rows;\r\n  },\r\n  get cells() {\r\n    return this.currentState.cells;\r\n  },\r\n  get lines() {\r\n    return this.currentState.lines;\r\n  },\r\n  get score() {\r\n    return this.currentState.score;\r\n  },\r\n  set score(score) {\r\n    this.currentState.score = score;\r\n  },\r\n  get speed() {\r\n    return this.currentState.speed;\r\n  },\r\n  set speed(num) {\r\n    this.currentState.speed = num;\r\n  },\r\n\r\n  init() {\r\n    this.currentState = Object.assign({}, this.initState);\r\n    this.generateLines();\r\n    this.gameInProgress = true;\r\n  },\r\n\r\n  startGame() {\r\n    view.hideOverlay();\r\n    model.generateFigure();\r\n    controller.activate();\r\n  },\r\n\r\n  gameOver() {\r\n    // тут нужен переход на экран конца игры\r\n    // но пока можно просто перезапускать игру\r\n    // значит нужно запустить метод перезапуска игры\r\n//    alert(`Game over! \\nВы набрали: ${this.score} очков.`);\r\n\r\n    this.gameInProgress = false;\r\n    controller.deactivate();\r\n\r\n    // записываем highScores\r\n    this.handleHighScore();\r\n\r\n    // переключаем экран и там уже выводим таблицу\r\n    // создаём оверлей\r\n    view.showOverlay(`score`);\r\n\r\n    // пишем в оверлей таблицу\r\n    view.renderScreen(`screenScore`, document.querySelector(`.overlay__score`));\r\n\r\n    // выводим таблицу highScores\r\n    // Этот метод нужно перенести в экран\r\n  },\r\n\r\n  handleHighScore() {\r\n//    utils.getCookie\r\n//    utils.setCookie\r\n\r\n    // Получить пред результат\r\n\r\n    let currentScore = this.score;\r\n\r\n//    let prevScore = utils.getCookie(`score1`);\r\n// //    Если текущий больше - обновить\r\n//    if (!prevScore || prevScore < currentScore) {\r\n//\r\n//      utils.setCookie(`score1`, currentScore, {expires: 1 * 365 * 24 * 60 * 60});\r\n//    }\r\n//\r\n// //     setCookie('key2', \"\", {expires: 1 * 365 * 24 * 60 * 60}); кука на год\r\n//\r\n//    this.record = utils.getCookie(`score1`);\r\n\r\n\r\n    // сравнить текущий результат со всеми в массиве рекордов\r\n    this.compareHighScore();\r\n\r\n    //    Если текущий больше - обновить\r\n    //    if (!prevScore || prevScore < currentScore) {\r\n//\r\n//      utils.setCookie(`score1`, currentScore, {expires: 1 * 365 * 24 * 60 * 60});\r\n//    }\r\n//\r\n// //     setCookie('key2', \"\", {expires: 1 * 365 * 24 * 60 * 60}); кука на год\r\n//\r\n//    this.record = utils.getCookie(`score1`);\r\n  },\r\n\r\n  deleteHighScore() {\r\n    // удаляем таблицу рекордов\r\n    utils.deleteCookie(this.HIGH_SCORES_NAME);\r\n  },\r\n\r\n  compareHighScore() {\r\n    // получить массив рекордов\r\n    let score = this.score;\r\n    let prevScores = this.getHighScoresArray();\r\n    this.record = prevScores;\r\n//    console.log(prevScores);\r\n\r\n\r\n    // если массив пуст - создать новый массив и записать текущее значение и имя пользователя\r\n    if (!prevScores) {\r\n      prevScores = [this.createHighScore()];\r\n    }\r\n    // если массив короче определённого значения - просто добавляем в него рекорд\r\n//    и сортируем массив\r\n    else if (prevScores.length < this.HIGH_SCORES_LENGTH) {\r\n      prevScores.push(this.createHighScore());\r\n      prevScores.sort((a, b) => b.score - a.score);\r\n    }\r\n    // если массив есть - перебираем его и ищем куда вставить текущее значение\r\n    // если\r\n    else {\r\n      // находим первый результат, который меньше текущего\r\n      let position = false;\r\n\r\n      prevScores.some((item, i) => {\r\n        if (score > item.score) {\r\n          position = i;\r\n          return true;\r\n        }\r\n      });\r\n      console.log(position);\r\n\r\n      if (position === false) {\r\n        return prevScores;\r\n      }\r\n\r\n      prevScores.splice(position, 0, this.createHighScore());\r\n      prevScores.length = this.HIGH_SCORES_LENGTH;\r\n    }\r\n\r\n    this.record = prevScores;\r\n    this.setHighScoresArray(prevScores);\r\n  },\r\n\r\n  createHighScore() {\r\n    let name = this.enterUserName();\r\n    return {name, score: this.score};\r\n  },\r\n\r\n  enterUserName() {\r\n    let name = prompt(`Введите своё имя:`, ``);\r\n    return name;\r\n  },\r\n\r\n  setHighScoresArray(arr) {\r\n    console.log(arr);\r\n\r\n    arr = JSON.stringify(arr);\r\n//     Преобразование массива в строку:\r\n//    > JSON.stringify([1, 2])\r\n//    *returns* '[1, 2]'\r\n//\r\n//    Затем мы можем сделать его печеньем:\r\n//    > $.cookie('cookie', '[1, 2]')\r\n//\r\n//    И затем проанализируйте его:\r\n//    > JSON.parse($.cookie('cookie'))\r\n//    *returns* [1, 2]\r\n    utils.setCookie(this.HIGH_SCORES_NAME, arr, {expires: 1 * 365 * 24 * 60 * 60});\r\n  },\r\n\r\n\r\n  getHighScoresArray() {\r\n    let cookie = utils.getCookie(this.HIGH_SCORES_NAME);\r\n//    console.log(cookie);\r\n    if (cookie) {\r\n      return JSON.parse(cookie);\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n\r\n\r\n  generateLines() {\r\n    let lines = [];\r\n    for (let i = 0; i < this.currentState.rows; i++) {\r\n      let arr = new Array(this.currentState.cells);\r\n      arr.fill(0);\r\n      lines.push(arr);\r\n    }\r\n//    console.log(lines);\r\n    this.currentState.lines = lines;\r\n  },\r\n\r\n  splitCoords(coords) {\r\n    let itemPos = coords.split(`.`);\r\n    let itemRow = +itemPos[0];\r\n    let itemCell = +itemPos[1];\r\n    return {row: itemRow, cell: itemCell};\r\n  },\r\n\r\n\r\n  pickRandomFigure() {\r\n//\t\tconsole.log(this.figures.length);\r\n    let rand = utils.randomInteger(0, this.figures.length - 1);\r\n\r\n    return new this.figures[rand]();\r\n  },\r\n\r\n\r\n  // эта функция должна выбирать одну рандомную фигуру\r\n  generateFigure() {\r\n    // let figure = pickRandomFigure()\r\n//    if (this.figure) {\r\n//      this.figure.destroy();\r\n//    }\r\n\r\n    // если игра закончилась, ничего не создавать\r\n    if (!this.gameInProgress) {\r\n      return;\r\n    }\r\n//    debugger;\r\n\r\n    if (this.nextFigure) {\r\n      this.figure = this.nextFigure;\r\n    } else {\r\n      this.figure = this.pickRandomFigure();\r\n    }\r\n\r\n    this.nextFigure = this.pickRandomFigure();\r\n\r\n//    console.log(`Эта фигура: `, this.figure);\r\n//    console.log(`След фигура: `, this.nextFigure);\r\n\r\n//    let coords = this.figure.coords;\r\n//    console.log(coords);\r\n    let center = this.currentState.cells / 2 - 1;\r\n//    console.log(center);\r\n//    figure.currentCoords =;\r\n    this.figure.currentCoords = this.figure.calculateRealCoords(`0.${center}`);\r\n//    console.log(this.figure.currentCoords);\r\n\r\n    this.figure.drawFigure();\r\n\r\n    // отрисовать следующую фигуру в окне след фигуры\r\n//    console.log(this.nextFigure);\r\n    if (!this.gameInProgress) {\r\n      return;\r\n    }\r\n\r\n    this.nextFigure.drawNextFigure();\r\n\r\n    // запускает таймер движения фигуры\r\n    this.figure.startMoving();\r\n  },\r\n\r\n\r\n  fire(location) {\r\n    let coords = this.splitCoords(location);\r\n    let row = coords.row;\r\n    let column = coords.cell;\r\n\r\n    this.lines[row][column] = 1;\r\n//\t\tconsole.log(this.lines);\r\n    view.displayHit(location);\r\n    if (this.isFullLine(row)) {\r\n      this.score++;\r\n      console.log(`Score: ` + this.score);\r\n//      this.deleteLine(row);\r\n\r\n      this.linesToDelete.push(row);\r\n//      console.log(this.lines);\r\n    }\r\n  },\r\n\r\n//  addToMasonry(pixel) {\r\n//    console.log(pixel);\r\n//  },\r\n\r\n  isFullLine(row) {\r\n    for (let i = 0; i < this.lines[row].length; i++) {\r\n      if (!this.lines[row][i]) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  deleteLine(row) {\r\n//    debugger;\r\n    console.log(`удаляем линию ` + row);\r\n    do {\r\n      this.lines[row] = this.lines[row - 1];\r\n      row--;\r\n    } while (row >= 1);\r\n//    this.lines[0] = [0, 0, 0, 0, 0, 0, 0];\r\n    this.lines[0] = new Array(model.cells).fill(0);\r\n  }\r\n};\r\n\r\nexport {model};\r\n","import {model} from './model.js';\r\nimport {Table} from './table.js';\r\nimport {view} from './view.js';\r\nimport {controller} from './controller.js';\r\n\r\n\r\nclass Application {\r\n\r\n  constructor() {\r\n    model.init();\r\n\r\n    this.table = new Table(model.rows, model.cells);\r\n\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    let table = this.table.getElem();\r\n    let screen = document.querySelector(`.screen`);\r\n    screen.appendChild(table);\r\n\r\n    view.init();\r\n    controller.init();\r\n  }\r\n}\r\n\r\nlet app = new Application();"],"names":["getElem","template"],"mappings":"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"}